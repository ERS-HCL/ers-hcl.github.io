{"data":{"mdx":{"code":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"YAML Based Automated Spring Boot Testing\",\n  \"date\": \"2018-11-19\",\n  \"author\": \"Kamran Khan <kamran.khan@hcl.com>\",\n  \"tags\": \"springboot, rest assured, yaml, json unit\",\n  \"excerpt\": \"Test your REST API without writing any script in any language.\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"This test framework lets you write your test cases in in simple YAML format. Currently only json response is supported. We use JsonPath and JsonUnit and Java regular expression libraries to provide you simple and elegant way of validating your json response. You can select a subset of json response by providing JsonPath expression and/or regular expression then validate it with JsonUnit. You can also combine multiple JsonPath expressions and regular expressions in a Unix like pipe fashion to precisely select a subset of json response and then validate it.\"), mdx(\"p\", null, \"Read below simple example.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"---\\ntestGroup:\\n- name: Simple test group\\n  tests:\\n  - name: simple test\\n    request: # Define http request parameters e.g. uri, method, cookie, header\\n      uri: https://httpbin.org/get?foo=vs1&foo=v2\\n      method: post # http method get/post/put/delete\\n      headers: # set headers\\n        content-type: application/json\\n        uuid: uuid-1\\n      cookies: # set cookies\\n        cookie1: kookie1\\n        cookie2: kookie2\\n      body: | # post payload\\n        {\\\"a\\\":\\\"b\\\"  \\\"c\\\":\\\"d\\\"}\\n    response: # test response\\n      status: 200 # test that http response status code 200\\n      headers: # test header data\\n        content-type: application/json # test content-type header value is application/json\\n      cookies: # test cookies data\\n        cookie1: kookie1 # test cookie1 value is kookie1\\n        cookie2: kookie2\\n      body: # test response body\\n        asserts: # add multiple assert statements\\n        - select: jsonpath args | jsonpath foo  # use unix like pipe feature to filter http response data in multiple stages\\n          value: [\\\"vs1\\\",\\\"v2\\\"] # expected output\\n        - select: jsonpath args | jsonpath foo | regex v\\\\d # from the htpp response data get jsonpath expression \\\"args\\\" value then from the output get jsonpah expression \\\"foo\\\" value then from the output run regular expression \\\"v\\\\d\\\"\\n          value: v2\\n\")), mdx(\"h1\", null, \"Quick setup steps\"), mdx(\"p\", null, \"This is a Java Maven project. Java 1.8 and Maven is required. Follow below steps to quickly run sample tests or create your test.\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Clone this project into a directory.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Run \\\"mvn clean verify\\\" to run sample tests defined in test-1.yaml and test-2.yaml files in \\\"src/test/resources\\\" directory.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"To define your tests create new test files in \\\"src/test/resources\\\" directory and change \\\"server.port\\\", \\\"server.baseURI\\\" and \\\"testFiles\\\" properties in \\\"src/test/resources/configuration.properties\\\" file.\")), mdx(\"h1\", null, \"Extra setup steps\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"If you have multiple environments dev, test etc. and you want to create separate set of tests for each environment then create test files for each environment. Create new configuration file with \\\"configuration-environment.properties\\\" where \\\"environment\\\" is the name of environment. Change \\\"server.port\\\", \\\"server.baseURI\\\" and \\\"testFiles\\\" properties value.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Run \\\"mvn clean verify -Denv=environment\\\" where \\\"environment\\\" is the name of environment to run test.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"If you want to run test from Eclipse IDE then import this maven project into Eclipse and right click \\\"MainTest\\\" class and run it as junit test. This test framework uses Junit5 so Eclipse IDE  Oxygen.2 Release (4.7.2) or higher is supported but you can run test as maven from lower version of Eclipse.\")), mdx(\"h1\", null, \"SSL certificates support\"), mdx(\"p\", null, \"If you are using HTTPS protocol then you need to add certificates in \\\"src/test/resources/configuration.properties\\\" file like follows. Go to references to know how to export certificates. \"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"certificates=certificates/httpbin.cer,certificates/alice.crt, certificates/bob.crt, certificates/carol.crt\\n\")), mdx(\"h2\", null, \"How to write test cases?\"), mdx(\"p\", null, \"Quickest way to start is to read \\\"src/test/resources/test-1.yaml\\\" test file.\"), mdx(\"p\", null, \"A test case is a REST API call with HTTP request data to be sent to a server and HTTP response data to be verified by the framework. A test group is a collection of test cases to be executed in a defined sequence.\"), mdx(\"p\", null, \"Basic structure of simple test case is follows:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"testGroup: # array of test group.\\n- name: # name of a test group\\n\\n  tests: # array of test cases\\n  - name: # name of tes case\\n\\n    request: # http request data to be sent\\n      uri: # uri, host name, port are defined in configuration.properties file\\n      method: #http request method get/post/put/delete\\n      parameters: # form parameters\\n        name1: value1 # name value pair\\n        name2: value2\\n      headers: # request headers \\n        name1: value1 # name value pair\\n        name2: value2\\n      cookies: #request cookies\\n        name1: value1 # name value pair\\n        name2: value2\\n      body: value #request body data\\n\\n    response: #http response data to be verified\\n      status: # response status code\\n      headers: # response headers\\n        name1: value1 # name value pair\\n        name2: value2\\n      cookies: #  response cookies\\n        name1: value1 # name value pair\\n        name2: value2\\n      body: # response body data verification\\n       asserts: # you can write multiple asserts to validate different part of json response\\n       - select: #jsonpath / reqular expressions\\n         value: # value to be matched\\n       - select:\\n         value: \\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Examples - Create test groups\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"testGroup:\\n  -\\n     name: first test group\\n     skip: true/false #if you want to skip this testGroup from execution set value to true/false\\n  -\\n     name: second test group\\n     skip: false\\n     .....\\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Example - Create tests\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"testGroup:\\n  -\\n     ....\\n     tests:\\n            -\\n                name: first rest call\\n                request:\\n                    uri: /cart/get/cart/${cartId} # request uri hostname and port is picked up from baseURI from application.properties file.\\n                    method: get/post/put/delete # use any of these values\\n                    headers: # create key value pairs of headers and its values\\n                        content-type: {$contentType}\\n                    cookie: # create key value pairs of cookies and its values\\n                    body: | # send following json as request payload\\n                        {\\n                            \\\"a\\\":\\\"b\\\",\\n                            \\\"c\\\":\\\"d\\\"\\n                        }\\n                response:\\n                    status: ${status} # assert that http response status is 200\\n                    header: # add key value pairs to assert on header values\\n                        content-type: {$contentType} #assert that content-type header value\\n                    body:\\n                        asserts: # add multiple assert key value pairs\\n                            -\\n                                select: jsonpath args.foo # json path expression to be used to get value from response body\\n                                value: |\\n                                       [v1,v2] # if the return value from json path is list of atomic values you can match them with comma separated values like this.\\n                            -\\n                                select: jsonpath args # json path expression\\n                                value: | # expected json value\\n                                    {\\n                                        \\\"foo\\\": [\\n                                        \\\"v1\\\",\\n                                        \\\"v2\\\"\\n                                        ]\\n                                    }\\n                            - \\n                                select: jsonpath args | jsonpath foo | regex v\\\\d # from the htpp response data get jsonpath expression \\\"args\\\" value then from the output get jsonpah expression \\\"foo\\\" value then from the output run regular expression \\\"v\\\\d\\\"\\n                                value: v2\\n\")), mdx(\"h2\", null, \"How to use variables.\"), mdx(\"p\", null, \"Variables can be defined inside the initGroup and they have global scope. You can reference these variables like \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"${variableName}\"), \" in the request header, cookies, body and uri values and response header, cookies and assert values. You can also assign values to these variables from response and refer the value in subsequent tests.\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Example - Define variable :\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"initGroup:\\n  variables:\\n    status: 200 #status variable is created with intial value of 200 \\n    contentType: \\\"application/json\\\" # contentType variable is created with initial value of application/json\\n    cartId: cid-1001\\n    uuid: # create uuid variable with null value\\n    country: US\\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Example - Use variables\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"testGroup:\\n  -\\n     name: ....\\n     tests:\\n       -\\n          request:\\n            uri: /get/cart/${cartId} # this is how you can use a variable inside uri.\\n            headers:\\n              content-type: {$contentType} # send content-type=application/json header in the request\\n            cookies:\\n              country: {$country} # send country=US cookie in the request\\n            response:\\n              status: {$status} # assert that http response status is 200\\n            header:\\n              content-type: {$contentType} #assert that content-type header is application/json\\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Example - Assign value to a variable from response.\", mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"testGroup:\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"-\\nname: ....\\ntests:\\n-\\nrequest:\\n....\\nresponse:\\n....\\n....\\nvariables:\\nuuid: header.uuid # assign uuid header value to uuid variable defined in the initGroup. if variable not defined new variable will be created.\\nsessionId:  cookie.session-id # assign session-id cookie value to sessionId variable.\\nskuId: body.response.skuId # assign value extracted from json response using \\\"response.skuId\\\" JsonPath expression for json path expression refer \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/json-path/JsonPath\"\n  }), \"https://github.com/json-path/JsonPath\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"\")))), mdx(\"h2\", null, \"How to do Json comparison\"), mdx(\"p\", null, \"Read  \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/lukas-krecan/JsonUnit\"\n  }), \"https://github.com/lukas-krecan/JsonUnit\")), mdx(\"h2\", null, \"How to write JsonPath expression\"), mdx(\"p\", null, \"Read \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/json-path/JsonPath\"\n  }), \"https://github.com/json-path/JsonPath\")), mdx(\"h2\", null, \"How to write regular expression\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html\"\n  }), \"https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html\")), mdx(\"h2\", null, \"References\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://docs.bvstools.com/home/ssl-documentation/exporting-certificate-authorities-cas-from-a-website\"\n  }), \"http://docs.bvstools.com/home/ssl-documentation/exporting-certificate-authorities-cas-from-a-website\"))), mdx(\"h2\", null, \"PROJECT DETAILS\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Project URL \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/ERS-HCL/rest-yaml-test\"\n  }), \"https://github.com/ERS-HCL/rest-yaml-test\"))), mdx(\"h2\", null, \"CONTRIBUTOR(S)\"), mdx(\"p\", null, \"Kamran Khan\"));\n}\nMDXContent.isMDXComponent = true;"},"frontmatter":{"title":"YAML Based Automated Spring Boot Testing","author":"Kamran Khan <kamran.khan@hcl.com>"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/posts/yaml-rest-test/"}}