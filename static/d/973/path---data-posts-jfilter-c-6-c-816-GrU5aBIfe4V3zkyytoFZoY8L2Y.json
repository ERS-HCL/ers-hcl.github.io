{"data":{"markdownRemark":{"html":"<h1>JFilter</h1>\n<p>JFilter is a simple and high performance open source library to filter (query), map (select) and reduce (aggregate) objects in a Java collection. Query is given in json format like Mongodb queries.</p>\n<p>####### This project is migrated from <a href=\"http://code.google.com/p/jfilter\">http://code.google.com/p/jfilter</a>. It was started in 2012 year, reached .6 version and was downloaded about 1000 times.</p>\n<h1>Key features</h1>\n<ul>\n<li>\n<p>Simple API, has only one interface class, can call filter, map and reduce functions any number of times and in any order. See following examples.</p>\n<pre><code>jfilter.filter(\"{'code':{'$le':'?1'}}\", 5).&#x3C;Sku> map(\"skus\").filter(\"{'price':'?1'}\", 30).out(new ArrayList&#x3C;Sku>());\njfilter.filter(\"{'code':{'$le':'?1'}}\", 5).&#x3C;Integer> map(\"skus.price\").out(new ArrayList&#x3C;Integer>());\njfilter.filter(\"{'code':{'$le':'?1'}}\", 5).&#x3C;Integer> map(\"skus.price\").max();\njfilter.&#x3C;Integer> map(\"skus.price\").max();\n</code></pre>\n</li>\n<li>\n<p>Support of collection (java.util.Collection, java.util.Map and Array) properties.</p>\n</li>\n<li>\n<p>Support of collection inside collection properties of any depth.</p>\n</li>\n<li>\n<p>Support of java generics.</p>\n</li>\n<li>\n<p>Support of non property methods, i.e. you can specify method name instead of property name in a query. Example: {'toString':'?1'}</p>\n</li>\n<li>\n<p>Support of inherited properties and method of any level. Example: {'getClass.getName':'eg.MyClass'} - where getClass() method of Object class is used to filter objects in a collection.</p>\n</li>\n<li>\n<p>Support of inner queries/filters.</p>\n</li>\n<li>\n<p>Support of parameterized queries/filters.</p>\n</li>\n<li>\n<p>Can filter 10 thousand records in few ms, 100 thousand in few 10 ms and 1 million records in few 100 ms. See the performace report.</p>\n</li>\n<li>\n<p>Filter ( query) is given in simple json format, it is like Mangodb queries. Following are some examples.</p>\n<pre><code>{ 'id':{'$le':'?id'}\n{ 'id': {'$in':'?idList'}}\n{'lineItems.lineAmount':'?amount'}\n{ '$and':[{'id': '?id'}, {'billingAddress.city':'?city'}]}\n{'lineItems.taxes':{ 'key':{'code':'?code'}, 'value':{'$gt': '?value'}}}\n{'$or':[{'code':'?code'},{'skus': {'$and':[{'price':{'$in':'?priceList'}}, {'code':'?skuCode'}]}}]}\n</code></pre>\n<h1>Jfilter Performance</h1>\n<p>[JFilter Performance] (<a href=\"https://khankamranali.wordpress.com/category/jfilter/\">https://khankamranali.wordpress.com/category/jfilter/</a>)</p>\n<h1>JFilter Documentation</h1>\n</li>\n</ul>\n<p>Please note that word query and filter is used interchangeably in this document.</p>\n<h2>Installation</h2>\n<p>Download latest JFilter version from download page.\nDownload Jackson core and mapper jars of version 1.9.0+ from <a href=\"http://wiki.fasterxml.com/JacksonDownload\">http://wiki.fasterxml.com/JacksonDownload</a>.\nAdd JFilter and Jackson jars in you project class path.</p>\n<h2>Javadocs</h2>\n<p>[JFilter] (<a href=\"https://github.com/khankamranali/jfilter/tree/master/src/main/java/gk/jfilter/JFilter.java\">https://github.com/khankamranali/jfilter/tree/master/src/main/java/gk/jfilter/JFilter.java</a>)</p>\n<h2>Overview</h2>\n<p>JFilter library has only one class [gk.jfilter.JFilter] (<a href=\"https://github.com/khankamranali/jfilter/tree/master/src/main/java/gk/jfilter/JFilter.java\">https://github.com/khankamranali/jfilter/tree/master/src/main/java/gk/jfilter/JFilter.java</a>) to filter/query, map/select and reduce/aggregate objects in a collection. You should create only one instance of JFilter class for each collection object to be filtered. JFilter constructor has Iterable argument, so apart from collection you can filter any class object which implements Iterable interface.</p>\n<h2>Following are different ways to execute filter.</h2>\n<pre><code>Collection pets = new ArrayList(); //populate pets collection\nJFilter jfilter = new JFilter(pets, Pet.class);\n\nCollection cats = filter.filter(\"{'type':'?1'}\", \"CAT\").out(new ArrayList());\nJFilter jfilter = new JFilter(pets, Pet.class);\n\nMap parameters = new HashMap();\nparameters.put(\"type\", \"CAT\"); \nCollection cats = jfilter.filter(\"{'type':'?type'}\", parameters).out(new ArrayList());\n\nparameters.put(\"type\", \"DOG\"); \nCollection dogs = jfilter.filter(\"{'type':'?type'}\", parameters).out(new ArrayList());\n</code></pre>\n<h2>Sample programs</h2>\n<ol start=\"2\">\n<li>\n<p>[Simple sample] (<a href=\"https://github.com/khankamranali/jfilter/tree/master/src/test/java/gk/jfilter/sample/simple/SimpleFilterMain.java\">https://github.com/khankamranali/jfilter/tree/master/src/test/java/gk/jfilter/sample/simple/SimpleFilterMain.java</a>)</p>\n</li>\n<li>\n<p>[Product sample] (<a href=\"https://github.com/khankamranali/jfilter/tree/master/src/test/java/gk/jfilter/sample/product\">https://github.com/khankamranali/jfilter/tree/master/src/test/java/gk/jfilter/sample/product</a>)</p>\n</li>\n<li>\n<p>[Sales order sample] (<a href=\"https://github.com/khankamranali/jfilter/tree/master/src/test/java/gk/jfilter/sample/salesorder\">https://github.com/khankamranali/jfilter/tree/master/src/test/java/gk/jfilter/sample/salesorder</a>)</p>\n</li>\n<li>\n<p>[Simple MapReduce sample] (<a href=\"https://github.com/khankamranali/jfilter/tree/master/src/test/java/gk/jfilter/sample/product/SimpleMapReduceMain.java\">https://github.com/khankamranali/jfilter/tree/master/src/test/java/gk/jfilter/sample/product/SimpleMapReduceMain.java</a>)</p>\n</li>\n<li>\n<p>[Product MapReduce sample] (<a href=\"https://github.com/khankamranali/jfilter/tree/master/src/test/java/gk/jfilter/sample/product/ProductMapReduceMain.java\">https://github.com/khankamranali/jfilter/tree/master/src/test/java/gk/jfilter/sample/product/ProductMapReduceMain.java</a>)</p>\n</li>\n</ol>\n<h2>How to write json filter</h2>\n<p>JFilter works on methods not on class properties, so if you want to filter on properties then there should be a corresponding getter methods.\nFor getter properties you can either give the property name or getter method name in the json filter. For example if a class has getName() method then you can write your json query like follows. Both produce same result.</p>\n<ul>\n<li>{'name':'?1'}</li>\n<li>{'getName':'?1}\njava.util.Collection and java.util.Map type or any generic type properties should have parameterized type e.g. Map&#x3C;String,List<String>>. JFilter ignores properties of generic type without parameterized type.</li>\n</ul>\n<p>Filter can contains non property methods which are non void and has zero arguments, e.g {'toString':'?1'}.</p>\n<p>Filter string should be in proper json format. You can use single quote ' instead of double quote \".\n$eq (equals) is a default operator in the json filters, if you do not specify any comparison operator. For example \"{'name':'?1'}\" filter selects objects where name=?1. You can specify other operators listed below like \"{'name':{'$ne':'?1}}\", it selects objects where name!=?1.</p>\n<p>JFilter supports properties inside properties till infinite level for example Product class can have Sku property (collection type) which again can have Price property. So if you want to filter Product objects which have a Sku price less than a given dollar. You can write json filter in following two ways, with dot (.) notation and without dot notation. For detail please see Product sample.</p>\n<ul>\n<li>{'skus.price':{'$le':'?1'}}</li>\n<li>{'skus':{'price':{'$le':'?1'}}</li>\n</ul>\n<p>JFilter provides two special properties for Map type properties: \"key\" and \"value\". For example if you have a method Map getTaxes() then you can following json filters.\n*{'taxes.key':'?1'} - select objects where tax key is equals to given argument.\n*{'taxes.value':{'$le':'?1'}} - select objects where tax value is less than equals to given argument.</p>\n<h2>Supported operators</h2>\n<table>\n<thead>\n<tr>\n<th>Operator</th>\n<th>Description</th>\n<th>Supported types</th>\n<th>Example</th>\n<th>Comment</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>$gt</td>\n<td>Greater than</td>\n<td>All</td>\n<td>\"{'length':{'$gt':'?length'}}\"</td>\n<td></td>\n</tr>\n<tr>\n<td>$ge</td>\n<td>Greater than equals to</td>\n<td>All</td>\n<td>\"{'length':{'$ge':'?length'}}\"</td>\n<td></td>\n</tr>\n<tr>\n<td>$lt</td>\n<td>Less than</td>\n<td>All</td>\n<td>\"{'length':{'$lt':'?length'}}\"</td>\n<td></td>\n</tr>\n<tr>\n<td>$le</td>\n<td>Less than equals to</td>\n<td>All</td>\n<td>\"{'length':{'$le':'?length'}}\"</td>\n<td></td>\n</tr>\n<tr>\n<td>$eq</td>\n<td>Equals to</td>\n<td>All</td>\n<td>\"{'name':{'$eq':'?name'}}\"</td>\n<td></td>\n</tr>\n<tr>\n<td>$sw</td>\n<td>Same as String startsWith</td>\n<td>String</td>\n<td>\"{'name':{'$sw':'?name'}}\"</td>\n<td>This special operator is provided because JFilter supports methods without any arguments</td>\n</tr>\n<tr>\n<td>$ew</td>\n<td>Same as String endsWith</td>\n<td>String</td>\n<td>\"{'name':{'$ew':'?name'}}\"</td>\n<td>This special operator is provided because JFilter supports methods without any arguments</td>\n</tr>\n<tr>\n<td>$cts</td>\n<td>Same as String contails</td>\n<td>String</td>\n<td>\"{'name':{'$cts':'?name'}}\"</td>\n<td>This special operator is provided because JFilter supports methods without any arguments</td>\n</tr>\n<tr>\n<td>$in</td>\n<td>In</td>\n<td>Collection, Array and Map</td>\n<td>\"{'type':{'$in':'?type'}}\"</td>\n<td></td>\n</tr>\n<tr>\n<td>$and</td>\n<td>AND</td>\n<td></td>\n<td>\"{'$and':[{'type':{'$in':'?type'}}, {'color':{'$in':'?type'}}]}\"</td>\n<td>join operator</td>\n</tr>\n<tr>\n<td>$or</td>\n<td>OR</td>\n<td></td>\n<td>\"{'$or':[{'type':{'$in':'?type'}}, {'color':{'$in':'?type'}}]}\"</td>\n<td>join operator</td>\n</tr>\n</tbody>\n</table>\n<h2>Supported data types</h2>\n<p>All primitives, BigDecimal, BigInteger, Boolean, Byte, Calendar, Character, java.util.Date, Float, Integer, Long, Short, String, java.sql.Time, java.sql.Timestamp, URI, UUID</p>\n<h2>How to use different data types</h2>\n<p>See the code of [Data type test program] (<a href=\"https://github.com/khankamranali/jfilter/tree/master/src/test/java/gk/jfilter/test/DataTypesTest.java\">https://github.com/khankamranali/jfilter/tree/master/src/test/java/gk/jfilter/test/DataTypesTest.java</a>)</p>\n<h2>Parameterized filters</h2>\n<p>Parameterized filters are when you do not provide attributes value in json filter string for example {'id':'?id'}. Question mark is used to indicate that value will be given as argument of JFilter.execute method. There are two type of parameterized filters:</p>\n<ul>\n<li>Type 1: In this type Filter parameters are written as {'attribute':'?string'} where \"string\" is any string. Parameter values are given as Map argument where Map key is \"string\" and value is object of type \"attribute\" specified in the filter. In case of operator $in and $nin values are given as List.</li>\n</ul>\n<h5>Example:</h5>\n<pre><code> JFilter&#x3C;SalesOrder> jfilter = new JFilter&#x3C;SalesOrder>(orders, SalesOrder.class); \n Map&#x3C;String, Integer> parameters = new HashMap&#x3C;String, Integer>(1); parameters.put(\"id\", 10);\n Collection&#x3C;SalesOrder> fc = jfilter.filter(\"{ 'id':{'$le':'?id'}}\", parameters).out(new ArrayList&#x3C;SalesOrder>());\n</code></pre>\n<ul>\n<li>Type 2: In this type parameters are given as \"?1\", \"?2\" etc in the filter, starting from \"?1\" to \"?n\" where n is integer. Parameter values are are picked from corresponding argument position in the variable arguments of JFilter.execute method.</li>\n</ul>\n<h5>Example:</h5>\n<pre><code>JFilter&#x3C;SalesOrder> filter = new JFilter&#x3C;SalesOrder>(orders, SalesOrder.class);\nCollection&#x3C;SalesOrder> fc = filter.filter(\"{ 'id':{'$le':'?1'}}\", 10).out(new ArrayList&#x3C;SalesOrder>());\n</code></pre>\n<p>JFilter does not support non parameterized queries.</p>\n<h2>Non property method in a filter</h2>\n<p>You can use non property methods in a filter, the method must be non void and should be of zero argument. Example: {'toString':'?1'}</p>\n<h2>Inherited properties and methods</h2>\n<p>JFilter supports inherited properties and method of any level. That means you can give inherited properties or methods in a filter. See in the following example getClass() method of Object class is used in a filter.</p>\n<p>Example:\n{'getClass.getName':'eg.MyClass'} - filter collection where class name is \"eg.MyClass\".</p>\n<h2>Blogs written on Jfilter.</h2>\n<p><a href=\"http://blogsbyabdullah.blogspot.in/2012/07/queryingfiltering-in-memory-data-using.html\">http://blogsbyabdullah.blogspot.in/2012/07/queryingfiltering-in-memory-data-using.html</a>\n<a href=\"https://jasokan.wordpress.com/2012/09/03/jfilter/\">https://jasokan.wordpress.com/2012/09/03/jfilter/</a></p>","frontmatter":{"title":"JFilter","author":"Kamran Khan <kamran.khan@hcl.com>"}}},"pageContext":{"slug":"/data/posts/jfilter/"}}